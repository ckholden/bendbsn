{
  "rules": {
    ".read": false,
    ".write": false,
    "chat": {
      "channels": {
        ".read": "auth != null",
        ".write": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\" || auth.token.email == \"holdenc\")"
      },
      "messages": {
        ".read": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")",
        "$channelId": {
          ".read": "auth != null",
          ".write": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")",
          "$messageId": {
            ".write": "auth != null && (!data.exists() || data.child('username').val() === auth.token.email || auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")",
            ".validate": "!newData.exists() || (newData.hasChildren(['user', 'username', 'text', 'timestamp']) && newData.child('username').val() === auth.token.email)",
            "reactions": {
              "$emoji": {
                "$uid": {
                  ".write": "auth != null && auth.uid === $uid",
                  ".validate": "newData.isBoolean() || !newData.exists()"
                }
              }
            }
          }
        }
      },
      "presence": {
        ".read": "auth != null",
        ".write": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")",
        "$uid": {
          ".write": "auth != null && (auth.uid === $uid || auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")"
        }
      },
      "typing": {
        "$channelId": {
          ".read": "auth != null",
          "$uid": {
            ".write": "auth != null && auth.uid === $uid"
          }
        }
      },
      "channelMembers": {
        ".read": "auth != null",
        ".write": "auth != null"
      },
      "threads": {
        "$channelId": {
          "$msgKey": {
            ".read": "auth != null",
            "replies": {
              "$replyKey": {
                ".write": "auth != null && (!data.exists() || data.child('username').val() === auth.token.email)"
              }
            }
          }
        }
      }
    },
    "directMessages": {
      "$convId": {
        ".read": "auth != null && (data.child('participants').child('user1_uid').val() === auth.uid || data.child('participants').child('user2_uid').val() === auth.uid)",
        ".write": "auth != null && (!data.exists() ? ((newData.child('participants').child('user1_uid').val() === auth.uid || newData.child('participants').child('user2_uid').val() === auth.uid) && newData.child('participants').child('user1_uid').val() != null && newData.child('participants').child('user2_uid').val() != null) : ((data.child('participants').child('user1_uid').val() === auth.uid || data.child('participants').child('user2_uid').val() === auth.uid) && newData.child('participants').child('user1_uid').val() === data.child('participants').child('user1_uid').val() && newData.child('participants').child('user2_uid').val() === data.child('participants').child('user2_uid').val()))",
        "messages": {
          "$messageId": {
            "reactions": {
              "$emoji": {
                "$uid": {
                  ".validate": "auth != null && auth.uid === $uid && (newData.isBoolean() || !newData.exists())"
                }
              }
            }
          }
        }
      }
    },
    "community": {
      "posts": {
        ".read": "auth != null",
        ".write": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")",
        "$postId": {
          ".write": "auth != null && (!data.exists() || data.child('authorEmail').val() === auth.token.email || auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")",
          ".validate": "!newData.exists() || newData.hasChild('author')",
          "replies": {
            "$replyId": {
              ".write": "auth != null && (!data.exists() || data.child('authorEmail').val() === auth.token.email || auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")"
            }
          },
          "likes": {
            "$uid": {
              ".write": "auth != null && auth.uid === $uid"
            }
          },
          "likedBy": {
            "$uid": {
              ".write": "auth != null && auth.uid === $uid"
            }
          }
        }
      }
    },
    "userDocuments": {
      "$uid": {
        ".read": "auth != null && auth.uid === $uid",
        ".write": "auth != null && auth.uid === $uid"
      }
    },
    "userProfiles": {
      ".read": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")",
      ".write": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")",
      "$uid": {
        ".read": "auth != null && (auth.uid === $uid || auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")",
        ".write": "auth != null && (auth.uid === $uid || auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")"
      }
    },
    "announcements": {
      ".read": "auth != null",
      ".write": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")"
    },
    "banned": {
      ".read": "auth != null",
      ".write": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")"
    },
    "globalPhrases": {
      ".read": "auth != null",
      ".write": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")"
    },
    "loginHistory": {
      ".read": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")",
      ".write": "auth != null"
    },
    "userExportHistory": {
      ".read": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")",
      ".write": "auth != null"
    },
    "notificationLog": {
      ".read": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.role == \"instructor\" || auth.token.email == \"christiankholden@gmail.com\")",
      ".write": "auth != null"
    },
    "userLastSeen": {
      ".read": "auth != null",
      "$uid": {
        ".write": "auth != null && auth.uid === $uid",
        ".validate": "newData.isNumber()"
      }
    },
    "appConfig": {
      ".read": "auth != null",
      ".write": "auth != null && (auth.token.admin == true || auth.token.role == \"admin\" || auth.token.email == \"christiankholden@gmail.com\")"
    },
    "groupChats": {
      ".read": "auth != null",
      ".write": "auth != null"
    },
  }
}
